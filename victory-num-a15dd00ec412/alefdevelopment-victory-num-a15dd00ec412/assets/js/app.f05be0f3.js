(function(e){function t(t){for(var i,a,o=t[0],s=t[1],u=t[2],l=0,_=[];l<o.length;l++)a=o[l],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&_.push(c[a][0]),c[a]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);d&&d(t);while(_.length)_.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,a=1;a<n.length;a++){var o=n[a];0!==c[o]&&(i=!1)}i&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},a={app:0},c={app:0},r=[];function o(e){return s.p+"assets/js/"+({}[e]||e)+"."+{"chunk-3444786c":"6095dba5","chunk-5dee79f3":"d2bccbcb","chunk-7f9aa53c":"9d468f51","chunk-a06951f4":"05c20ea7","chunk-eff98dc4":"b69d9f0b","chunk-c60d658c":"2d78fe65","chunk-081bf6bd":"ef17c30e","chunk-1f3a1f6a":"1ec43084","chunk-2d213125":"483aaa3d","chunk-2d21a09f":"9c2db981","chunk-2d225263":"97a63f2c"}[e]+".js"}function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-3444786c":1,"chunk-5dee79f3":1,"chunk-7f9aa53c":1,"chunk-a06951f4":1,"chunk-eff98dc4":1,"chunk-c60d658c":1,"chunk-1f3a1f6a":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var i="assets/css/"+({}[e]||e)+"."+{"chunk-3444786c":"41fdca5f","chunk-5dee79f3":"f504a931","chunk-7f9aa53c":"4b47949e","chunk-a06951f4":"082b4849","chunk-eff98dc4":"5cc36123","chunk-c60d658c":"a0853d99","chunk-081bf6bd":"31d6cfe0","chunk-1f3a1f6a":"e6cf0737","chunk-2d213125":"31d6cfe0","chunk-2d21a09f":"31d6cfe0","chunk-2d225263":"31d6cfe0"}[e]+".css",c=s.p+i,r=document.getElementsByTagName("link"),o=0;o<r.length;o++){var u=r[o],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===i||l===c))return t()}var _=document.getElementsByTagName("style");for(o=0;o<_.length;o++){u=_[o],l=u.getAttribute("data-href");if(l===i||l===c)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var i=t&&t.target&&t.target.src||c,r=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=i,delete a[e],d.parentNode.removeChild(d),n(r)},d.href=c;var p=document.getElementsByTagName("head")[0];p.appendChild(d)})).then((function(){a[e]=0})));var i=c[e];if(0!==i)if(i)t.push(i[2]);else{var r=new Promise((function(t,n){i=c[e]=[t,n]}));t.push(i[2]=r);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=o(e);var _=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=c[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;_.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",_.name="ChunkLoadError",_.type=i,_.request=a,n[1](_)}c[e]=void 0}};var d=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var _=0;_<u.length;_++)t(u[_]);var d=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"21bb":function(e,t,n){"use strict";var i=n("2dad"),a=n.n(i);a.a},"2dad":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);var i=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},c=[],r={name:"App"},o=r,s=(n("5c0b"),n("2877")),u=Object(s["a"])(o,a,c,!1,null,null,null),l=u.exports,_=(n("c975"),n("e260"),n("e6cf"),n("2532"),n("ddb0"),n("2f62"));i["a"].use(_["a"]);var d=new _["a"].Store({state:{cities:[],active_city:{},show_cities:[],people:[],active_person:{},show_people:[],regions:[],active_region:{},quotes:[],user_clicked_map:!1,search_map:!1,search_text:"",line_scrolled:!1,modal:!1,graphics:[]},getters:{cityChecker(){return(e,t)=>e.region_id===t.region_id&&e.country_id===t.country_id},active_city(e){return e.active_city},cities(e){return e.search_map?e.show_cities:e.cities},active_person(e){return e.active_person},people(e){return e.show_people},regions(e){return e.regions},line_scrolled(e){return e.line_scrolled},active_region(e){return e.active_region},quotes(e){return e.quotes},user_clicked_map(e){return e.user_clicked_map},search_map(e){return e.search_map},search_text(e){return e.search_text},modal(e){return e.modal},graphics(e){return e.graphics}},mutations:{SET_CITIES(e,t){e.cities=[...t],e.show_cities=e.cities},SET_ACTIVE_CITY(e,t){e.active_city=t},SET_PEOPLE(e,t){e.people=[...t]},SET_ACTIVE_PERSON(e,t){e.active_person=t||{}},SET_REGIONS(e,t){e.regions=[...t]},SET_ACTIVE_REGION(e,t){e.active_region=t},SET_CLICK_MAP(e,t){e.user_clicked_map=t},SET_SEARCH_ACTIVE(e,t){e.search_map=t},SHOW_CITIES(e,t){e.show_cities=t},SHOW_PEOPLE(e,t){e.show_people=t},SET_SEARCH(e,t){e.search_text=t},SET_QUOTES(e,t){e.quotes=t},UPDATE_QUOTES(e){e.quotes.push(e.quotes.shift())},SCROLL_LINE(e,t){e.line_scrolled=t},SET_MODAL(e,t){e.modal=t},SET_GRAPHICS(e,t){e.graphics=t}},actions:{async setActiveCity({commit:e,getters:t,state:n,dispatch:i},a){const c=n.people.filter(e=>a.id===e.city_id);c.length>0&&(e("SET_ACTIVE_REGION",t.regions.find(e=>t.cityChecker(a,e))),e("SET_ACTIVE_CITY",a),e("SET_ACTIVE_PERSON",c[0]),e("SET_SEARCH_ACTIVE",!1),e("SET_CLICK_MAP",!0),await i("setBasicShowInfo"))},setBasicShowInfo({commit:e,getters:t,state:n}){return new Promise(i=>{const a=n.cities.filter(n.active_region.id?e=>t.cityChecker(e,n.active_region):()=>!0);e("SHOW_CITIES",a);const c=n.people.filter(e=>n.active_city.id?e.city_id===n.active_city.id:!!a.find(t=>t.id===e.city_id));e("SHOW_PEOPLE",c),i(!0)})},async setActiveRegion({commit:e,dispatch:t,state:n},i){if(e("SET_SEARCH_ACTIVE",!1),i.id){const a=n.cities.filter(e=>e.search_region_id===i.id).map(e=>e.id),c=n.people.filter(e=>a.includes(e.city_id));return c.length>0&&(e("SET_ACTIVE_REGION",i),e("SET_ACTIVE_CITY",n.cities.filter(e=>e.search_region_id===i.id)[0]),e("SET_ACTIVE_PERSON",c[0]),e("SET_CLICK_MAP",!0),await t("setBasicShowInfo")),c.length>0}return e("SET_ACTIVE_REGION",{}),e("SET_ACTIVE_CITY",{}),e("SET_ACTIVE_PERSON",{}),e("SET_CLICK_MAP",!1),!1},setActivePerson({commit:e,getters:t,state:n},i){return new Promise(a=>{e("SET_ACTIVE_PERSON",i),n.search_map&&e("SET_MODAL",!0);const c=n.cities.map(e=>e.id).indexOf(i.city_id);e("SET_ACTIVE_CITY",-1!==c?n.cities[c]:{}),e("SET_ACTIVE_REGION",n.regions.find(e=>t.cityChecker(t.active_city,e))),e("SET_SEARCH_ACTIVE",!1),e("SET_CLICK_MAP",!0),a(!0)})},setClicked({commit:e},t){e("SET_CLICK_MAP",t)},async getGraphicsInfo({commit:e}){const t=await fetch(`${location.origin}/api/getGraphics.php`);t.ok&&e("SET_GRAPHICS",(await t.json()).result);const n=await fetch(`${location.origin}/api/getQuotes.php`);n.ok&&e("SET_QUOTES",(await n.json()).result)},async getFullInfo({commit:e,dispatch:t}){const n=await fetch(`${location.origin}/api/getRegions.php`);n.ok&&e("SET_REGIONS",(await n.json()).result);const i=await fetch(`${location.origin}/api/getCities.php`);i.ok&&e("SET_CITIES",(await i.json()).result);const a=await fetch(`${location.origin}/api/getPeople.php`);a.ok&&e("SET_PEOPLE",(await a.json()).result),t("setBasicShowInfo");const c=await fetch(`${location.origin}/api/getQuotes.php`);c.ok&&e("SET_QUOTES",(await c.json()).result)},async getPersonInfo({commit:e},t){const n=await fetch(`${location.origin}/api/getPerson.php?id=${t}`);n.ok&&e("SET_ACTIVE_PERSON",(await n.json()).result)},async searchInfo({commit:e,getters:t}){const n=await fetch(`${location.origin}/api/getSearch.php?search=${t.search_text}`),i=(await n.json()).result;e("SHOW_CITIES",i.cities),e("SHOW_PEOPLE",i.people),e("SET_ACTIVE_REGION",{}),e("SET_ACTIVE_CITY",{}),e("SET_ACTIVE_PERSON",{}),e("SET_CLICK_MAP",!1),e("SET_SEARCH_ACTIVE",t.search_text.length>0)},updateText({commit:e},t){e("SET_SEARCH",t.target.value)},getNextQuote({commit:e}){e("UPDATE_QUOTES")},toggleLine({commit:e},t){e("SCROLL_LINE",t)},toggleModal({commit:e},t){e("SET_MODAL",t)}}}),p=n("8c4f"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-wrap"},[n("div",{staticClass:"home-page"},[e._m(0),n("div",{staticClass:"offer"},[e._m(1),n("HomeSlider")],1),n("div",{staticClass:"move-on"},[n("HomeProgress"),n("router-link",{staticClass:"move-on__link",attrs:{to:"people",tag:"a"}},[e._v("Идти дальше")])],1)]),n("div",{staticClass:"backgrounds"},e._l(e.backgrounds,(function(t,i){return n("div",{key:i,staticClass:"background",class:{active:i===e.active_index},style:{backgroundImage:"url('"+t+"')"}})})),0),n("BlockBooks")],1)},f=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"logo-stat"},[i("a",{attrs:{href:"https://www.gks.ru",target:"_blank"}},[i("img",{attrs:{src:n("76da")}})])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"offer__image"},[i("img",{attrs:{src:n("9d64")}})])}],E={name:"Home",components:{BlockBooks:()=>n.e("chunk-5dee79f3").then(n.bind(null,"9872")),HomeSlider:()=>n.e("chunk-a06951f4").then(n.bind(null,"6f1b")),HomeProgress:()=>n.e("chunk-eff98dc4").then(n.bind(null,"a760"))},data(){return{bg_interval:null,active_index:0}},computed:{backgrounds(){return["/assets/images/bg-index.jpg","/assets/images/bg-index2.jpg","/assets/images/bg-index3.jpg"]}},mounted(){this.$set(this,"bg_interval",setInterval(()=>{const e=this.active_index+1===this.backgrounds.length?0:this.active_index+1;this.$set(this,"active_index",e)},5e3))},beforeDestroy(){clearInterval(this.bg_interval),this.$set(this,"bg_interval",null)}},g=E,m=(n("21bb"),Object(s["a"])(g,h,f,!1,null,null,null)),S=m.exports;i["a"].use(p["a"]);const T=[{path:"/",name:"Home",component:S},{path:"/people",name:"People",props:e=>({id:e.query.pid}),component:()=>n.e("chunk-7f9aa53c").then(n.bind(null,"bea6"))},{path:"/people/:id",name:"PeopleID",props:!0,component:()=>n.e("chunk-7f9aa53c").then(n.bind(null,"bea6"))},{path:"/graphics",name:"Graphics",component:()=>n.e("chunk-3444786c").then(n.bind(null,"d795"))}],v=new p["a"]({routes:T,mode:"history"});var C=v,k=n("58ca");i["a"].config.productionTip=!1,i["a"].use(k["a"]),new i["a"]({store:d,router:C,render:e=>e(l)}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var i=n("9c0c"),a=n.n(i);a.a},"76da":function(e,t,n){e.exports=n.p+"assets/img/logo-stat.c8a3efcf.png"},"9c0c":function(e,t,n){},"9d64":function(e,t,n){e.exports=n.p+"assets/img/logo.048bcec7.png"}});
//# sourceMappingURL=app.f05be0f3.js.map